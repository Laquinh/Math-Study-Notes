\documentclass[11pt, a4paper, tikz]{article}

\usepackage[english]{babel} %language
\usepackage[utf8]{inputenc} %UTF-8 encoding
\usepackage[margin=1in]{geometry} %smaller margin
\usepackage{amssymb} %\nexists \mathbb
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{graphicx}
\usepackage{polynom}
\usepackage{mathtools}
\usepackage{enumitem}

\usepackage{xlop}
\usepackage[dvipsnames]{xcolor}
\usepackage{tcolorbox}

\definecolor{formulationFrameColor}{RGB}{255,255,255}
\definecolor{formulationBackgroundColor}{RGB}{240,245,250}

\newtcolorbox{formulationBox}{
	colframe=formulationFrameColor,
	colback=formulationBackgroundColor
}

\usepackage{tikz}   
\usepackage{pgfplots}

\pgfplotsset{compat=1.6}

\pgfplotsset{soldot/.style={color=red,only marks,mark=*}} \pgfplotsset{holdot/.style={color=red,fill=white,only marks,mark=*}}

\pgfplotsset{compat=newest} % used to declare my style command.  

\newcommand{\newpara}{
	\vskip 2mm
}

\newcommand{\centsection}[1]{
	\section*{\centering{#1}}
}

\newcommand{\centsubsection}[1]{
	\subsection*{\centering{#1}}
}

\newcommand{\myOver}[2]{
	\ensuremath{\overset{\kern2pt #1}{#2}}
}

\newcommand{\final}[1]{
	$\mathcal{F}($#1$)$
}

\renewcommand{\qed}{\hfill\blacksquare}

\newcommand{\Lim}[1]{\raisebox{0.5ex}{\scalebox{0.8}{$\displaystyle \lim_{#1}\;$}}}
\newcommand{\Inf}[1]{\raisebox{0.5ex}{\scalebox{0.8}{$\displaystyle \inf_{#1}\;$}}}
\newcommand{\Sup}[1]{\raisebox{0.5ex}{\scalebox{0.8}{$\displaystyle \sup_{#1}\;$}}}
\newcommand{\Sum}[2]{\displaystyle \sum_{#1}^{#2}}
\newcommand{\Int}[2]{\displaystyle \int_{#1}^{#2}}
\newcommand{\Bigcup}[2]{\displaystyle \bigcup_{#1}^{#2}}

\newcommand{\naturals}{
	\ensuremath{\mathbb{N}}
}
\newcommand{\integers}{
	\ensuremath{\mathbb{Z}}
}
\newcommand{\rationals}{
	\ensuremath{\mathbb{Q}}
}
\newcommand{\reals}{
	\ensuremath{\mathbb{R}}
}
\newcommand{\complexes}{
	\ensuremath{\mathbb{C}}
}

\newcommand{\cover}[1]{
	\ensuremath{\mathcal{#1}}
}

\newcommand{\sigmaAlgebra}[1]{
	\ensuremath{\mathcal{#1}}
}

\graphicspath{ {./media/} }

\begin{document}
	\title{\textbf{Chapter 2 â€” Section B}}
	\maketitle
	%\setcounter{section}{3}
	\centsection{Exercise 1}
	
	\begin{formulationBox}
		Show that $\sigmaAlgebra{S} = \{\bigcup_{n\in K}(n, n+1]:K\subseteq\integers\}$ is a $\sigma$-algebra on $\reals$.
	\end{formulationBox}

	\begin{itemize}
	\item First off, we prove the first bullet point. Since $\varnothing\subseteq\integers$, an element of $\sigmaAlgebra{S}$ is $\bigcup_{n\in\varnothing}(n, n+1] = \varnothing$.
	
	\item As for the second bullet point, we note that $(a, a+1]\cap(b, b+1] = \varnothing$ for all $a,b\in\integers$ with $a\neq b$. This may be understood as each interval $(n, n+1]$ being \textit{generated by} a unique number $n\in\integers$.
	
	Now, let $E = \bigcup_{n\in K}(n, n+1]$ for some random $K\subseteq\integers$. The element $\bar{E} = \reals\setminus E$ can be defined as $\bar{E} = \bigcup_{n\in \bar{K}}(n, n+1]$, where $\bar{K} = \integers\setminus K$. Since $\bar{K}\in\integers$, we get $\bar{E}\in\sigmaAlgebra{S}$.
	
	\item Finally, we prove the third bullet point. Let $E_1, E_2, ...$ be a sequence of elements of $\sigmaAlgebra{S}$. Of course, each $E_k$ is the union of some intervals $(n, n+1]$, with $n\in K_k$ for some $K_k\subseteq\integers$. This may be understood as each element $E_k$ being \textit{generated by} a unique subset $K_k\subseteq\integers$.
	
	Since the union is asociative, for some random $E_a$, $E_b$ in the sequence, we get $E_a\cup E_b = \bigcup_{n\in(K_a\cup K_b)}(n, n+1]$. Note that $K_a\cup K_b$ contains generators from both $K_a$ and $K_b$. In general, $\Bigcup{k=1}{\infty}E_k = \bigcup_{n\in\bigcup_{k=1}^{\infty}K}(n, n+1]$. Since $\bigcup_{k=1}^{\infty}K \subseteq \integers$, we conclude that $\bigcup_{k=1}^{\infty}E_k \in \sigmaAlgebra{S}$.
	
	\end{itemize}
	
	$\qed$
	
	\centsection{Exercise 2}
	
	\begin{formulationBox}
		\begin{enumerate}[label=\alph*)]
			\item Suppose $X$ is a set and $\mathcal{A}$ is the set of subsets of $X$ that consist of exactly one element: \[\mathcal{A} = \{\{x\}:x\in X\}.\]
			Prove that the smallest $\sigma$-algebra on $X$ containing $\mathcal{A}$ is the set of all subsets $E$ of $X$ such that $E$ is countable or $X\setminus E$ is countable.
			
			\item Suppose $\mathcal{A} = \{(0,1), (0,\infty)\}$. Prove that the smallest $\sigma$-algebra on $\reals$ containing $\mathcal{A}$ is \[\{\varnothing, (0,1), (0,\infty), (-\infty,0]\cup[1,\infty), (-\infty, 0], [1,\infty), (-\infty,1), \reals\}.\]
		\end{enumerate}
	\end{formulationBox}

	\begin{enumerate}[label=\alph*)]
		\item Let $\sigmaAlgebra{S}$ be the smallest $\sigma$-algebra on $X$ containing $\mathcal{A}$. Of course, $\mathcal{A}\subseteq\sigmaAlgebra{S}$.
		
		To verify the third bullet point, the following must be true: \[\bigcup_{k=1}^{\infty}a_k\in\sigmaAlgebra{S}\] with $a_k\in\mathcal{A}$. Since the countable union of countable sets is countable, all $a_k$ are countable, and all elements of $X$ belong to some element of $\mathcal{A}$, we need for all countable sets to be in $\sigmaAlgebra{S}$.
		
		To verify the second bullet point, because all countable sets are in $\sigmaAlgebra{S}$, then all sets $X\setminus E$ such that $E$ is countable must be in $\sigmaAlgebra{S}$ as well. Since $E = X\setminus(X\setminus E)$, this is equivalent to saying that all sets $E$ such that $X\setminus E$ is countable must be in $\sigmaAlgebra{S}$.
		
		Finally, since $\varnothing$ is countable, the first bullet point is trivially verified.
		
		Therefore, the described set owns all the elements necessary for it to be a sigma algebra, and we don't need any more elements for it to contain $\mathcal{A}$, which means it is the smallest $\sigma$-algebra containing $\mathcal{A}$.
		
		$\qed$
		
		\item Let $\sigmaAlgebra{S}$ be the smallest $\sigma$-algebra on $\reals$ containing $\mathcal{A}$.
		
		To verify the first bullet point, we need $\varnothing\in\sigmaAlgebra{S}$.
		
		As for the second bullet point, because we want $(0,1)\in\sigmaAlgebra{S}$ and $(0,\infty)\in\sigmaAlgebra{S}$, we also need $(-\infty,0]\cup[1,\infty)\in\sigmaAlgebra{S}$ and $(-\infty,0]\in\sigmaAlgebra{S}$. We also need $\reals\in\sigmaAlgebra{S}$ because of the first condition.
		
		Finally, for the third bullet point's condition to be met, we need the unions among all these elements to belong to $\sigmaAlgebra{S}$, as well as their complements.
		
		We are missing $(-\infty, 1)$, which is required as the union $(-\infty,0]\cup(0,1)$. Its complement $[1,\infty)$ also needs to belong to $\sigmaAlgebra{S}$ in order for the second bullet point to still hold.
		
		$\qed$
	\end{enumerate}

	\centsection{Exercise 3}
	
	\begin{formulationBox}
		Suppose $\sigmaAlgebra{S}$ is the smallest $\sigma$-algebra on $\reals$ containing $\{(r,s]:r,s\in\rationals\}$. Prove that $\sigmaAlgebra{S}$ is the collection of Borel subsets of $\reals$.
	\end{formulationBox}

	Let $\sigmaAlgebra{B}$ denote the collection of all Borel subsets of $\reals$.

	Note that the described intervals are Borel sets because they are half-open intervals, so $\{(r,s]:r,s\in\rationals\}\subseteq\sigmaAlgebra{B}$, therefore $\sigmaAlgebra{S}\subseteq\sigmaAlgebra{B}$.
	
	Let $r',s'\in\reals$. We can find a sequence of rationals $r'_1, r'_2, ...$ with $r'_k < r'$ where $k\in\naturals$ whose limit is $r'$. (Same with $s'$).
	
	Because of the third condition, the union or intersection of a sequence of $\sigmaAlgebra{S}$-measurable sets must also be $\sigmaAlgebra{S}$-measurable. We can define the sequence to be $(r'_1, s'_1], (r'_2,s'_2], ...$, so the union of all these intervals is $[r', s')\in\sigmaAlgebra{S}$.
	
	Now, let $a,b\in\reals$. We can define a sequence $[a_1, b), [a_2, b), ...$ with $a_k = a+\frac{1}{k+k_0}$, $k\in\naturals^+$ and $k_0>\frac{1}{b}-k$. Since the sequence $a_1, a_2, ...$ converges to $a$ from the right, the union of all these intervals is $(a, b)$. This means $\sigmaAlgebra{S}$ contains all open subintervals of $\reals$, therefore $\sigmaAlgebra{B} \subseteq \sigmaAlgebra{S}$.
	
	Since $\sigmaAlgebra{S}\subseteq\sigmaAlgebra{B}$ and $\sigmaAlgebra{B} \subseteq \sigmaAlgebra{S}$, we obtain $\sigmaAlgebra{B} = \sigmaAlgebra{S}$.
	
	$\qed$
	
	\centsection{Exercise 4}
	
	\begin{formulationBox}
		Suppose $\sigmaAlgebra{S}$ is the smallest $\sigma$-algebra on $\reals$ containing $\{(r,n]:r\in\rationals,n\in\integers\}$. Prove that $\sigmaAlgebra{S}$ is the collection of Borel subsets of $\reals$.
	\end{formulationBox}
	
	Let $\sigmaAlgebra{B}$ denote the collection of all Borel subsets of $\reals$.
	
	Note that the described intervals are Borel sets because they are half-open intervals, so $\{(r,n]:r\in\rationals,n\in\integers\}\subseteq\sigmaAlgebra{B}$, therefore $\sigmaAlgebra{S}\subseteq\sigmaAlgebra{B}$.
	
	Because of the second condition, the subsets of $\reals$ of the form $(-\infty, r]\cup(n, \infty)$ must also be $\sigmaAlgebra{S}$-measurable.
	
	Because of the third condition, the intersection of a sequence of $\sigmaAlgebra{S}$-measurable sets must also be $\sigmaAlgebra{S}$-measurable.
	
	Let $r_1, r_2\in\rationals$ and $n_1, n_2\in\integers$ with $r_1 < r_2 < n_1 < n_2$. Now, consider the sets $(r_1, n_1]$ and $(-\infty, r_2]\cup(n_2, \infty)$. The intersection of these sets is $(r_1, r_2]$. This means that \[\{(r,s]:r,s\in\rationals\}\in\sigmaAlgebra{S}.\]
	
	The rest can be proved as in exercise 3.
	
	$\qed$
	
	\centsection{Exercise 9}
	
	\begin{formulationBox}
		Give an example of a measurable space $(X, \sigmaAlgebra{S})$ and a function $f:X\rightarrow\reals$ such that $|f|$ is $\sigmaAlgebra{S}$-measurable but $f$ is not $\sigmaAlgebra{S}$-measurable.
	\end{formulationBox}

	Let $X=\reals$ and $\sigmaAlgebra{S} = \{\varnothing, \reals\}$. Consider the function
	\[
		f(x) = \begin{cases}
			-1 &\quad x<0\\
			1 &\quad x\geq0.
		\end{cases}
	\]
	
	Then, $|f|$ is a constant function, but $f$ is not. Since the only $\sigmaAlgebra{S}$-measurable functions are the constant functions, $|f|$ is $\sigmaAlgebra{S}$-measurable but $f$ is not.
\end{document}